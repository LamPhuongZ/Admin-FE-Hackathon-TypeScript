import{u as D,d as T,r as u,j as t,av as v,aw as K,ax as N}from"./index-Kvu0bFJg.js";import{b as L}from"./index-TLkSNTa-.js";import{E as B}from"./index.esm-DmaffVTl.js";import{F as f,T as b}from"./index-DOmViuc0.js";import{S as V,B as o,I as z}from"./index-CBdURe_x.js";import{F as P}from"./Table-DvFsFOEP.js";import{T as I,P as R}from"./index-Db5dijEX.js";import"./iconBase-B4PMkM9p.js";import"./ExclamationCircleFilled-53hoV8aY.js";import"./ActionButton-CSAFwOuQ.js";const X=({editing:i,dataIndex:s,title:l,inputType:p,record:g,index:c,children:d,...r})=>{const x=s==="stt"||s==="id"?t.jsx(I,{disabled:!0}):p==="number"?t.jsx(I,{}):t.jsx(z.TextArea,{rows:4,style:{height:"auto"}});return t.jsx("td",{...r,children:i?t.jsx(f.Item,{name:s,style:{margin:0},rules:[{required:!0,message:`Vui lÃ²ng nháº­p ${l}!`}],children:x}):d})},W=()=>{const{allSkill:i}=D(e=>e.skillReducer),s=T(),l=async()=>{const e=v();await s(e)};u.useEffect(()=>{l()},[]),u.useEffect(()=>{if(i&&i.length>0){const e=i.slice().reverse().map((n,a)=>({...n,stt:a+1}));r(e)}},[i]);const p=async e=>{await s(K(e)),await l()},g=async e=>{await s(N(e)),await l()},[c]=f.useForm(),[d,r]=u.useState([]),[x,m]=u.useState(""),j=e=>e.id===x,S=e=>{c.setFieldsValue({stt:"",skill:"",description:"",...e}),m(e.id)},k=()=>{m("")},C=async e=>{try{const n=await c.validateFields();console.log("ðŸš€ ~ file: Skill.tsx:135 ~ save ~ row:",n),g(n);const a=[...d],h=a.findIndex(y=>e===y.id);if(h>-1){const y=a[h];a.splice(h,1,{...y,...n}),r(a),m("")}else a.push(n),r(a),m("")}catch(n){console.log("Validate Failed:",n)}},w=[{title:"Stt",dataIndex:"stt",key:"stt",width:40,editable:!0},{title:"Id",dataIndex:"id",key:"id",width:40,editable:!0},{title:"Ká»¹ nÄƒng",dataIndex:"skill",key:"skill",width:250,editable:!0},{title:"MÃ´ táº£",dataIndex:"description",key:"description",width:500,editable:!0},{title:"Chá»‰nh sá»­a",width:130,dataIndex:"operation",render:(e,n)=>j(n)?t.jsxs("span",{children:[t.jsx(b.Link,{onClick:()=>C(n.id),style:{marginInlineEnd:8},children:t.jsx(o,{className:"bg-[#57c81f] text-white custom-button",children:"LÆ°u"})}),t.jsx(R,{title:"Báº¡n cÃ³ muá»‘n há»§y?",onConfirm:k,children:t.jsx(o,{type:"primary",danger:!0,children:"Há»§y"})})]}):t.jsx(b.Link,{className:"flex justify-center",disabled:x!=="",onClick:()=>S(n),children:t.jsxs(o,{type:"primary",children:[t.jsx(L,{className:"inline-block me-[6px] text-xl"})," Sá»­a"]})})},{title:"XÃ³a Ká»¹ nÄƒng",dataIndex:"delete",key:"delete",width:100,render:(e,n)=>t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx(o,{type:"primary",danger:!0,onClick:()=>p(n.id),children:"X"})})}],E=w.map(e=>e.editable?{...e,onCell:n=>({record:n,inputType:e.dataIndex==="stt"||e.dataIndex==="id"?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:j(n)})}:e),F=e=>!!e.dataIndex,A=w.filter(F).map(e=>({title:e.title,dataIndex:e.dataIndex}));return t.jsxs(t.Fragment,{children:[t.jsx(V,{className:"pb-4",children:t.jsx(o,{size:"large",onClick:()=>{new B().addSheet("DanhSachKynang").addColumns(A).addDataSource(d||[]).saveAs("DanhSachKynang.xlsx")},children:"Export File Excel"})}),t.jsx(f,{form:c,component:!1,children:t.jsx(P,{components:{body:{cell:X}},bordered:!0,size:"small",dataSource:d,columns:E,rowKey:"id",scroll:{x:"max-content",y:370},pagination:{onChange:k}})})]})};export{W as default};
