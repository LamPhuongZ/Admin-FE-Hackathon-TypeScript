import{k as D,n as K,r as m,j as t,aP as T,aQ as v,aR as N}from"./index-6gDDjvMj.js";import{b as L}from"./index-LAYU6wNS.js";import{E as B}from"./index.esm-BKn4Vs40.js";import{F as g,T as w,a as I,b as R}from"./index-CjlOXFWz.js";import{c as V,B as c,F as z,I as P}from"./Table-H6LVRHGa.js";import"./iconBase-CMt063Ty.js";import"./ActionButton-Ci9LvKK2.js";const X=({editing:i,dataIndex:s,title:l,inputType:p,record:f,index:o,children:d,...r})=>{const x=s==="stt"||s==="id"?t.jsx(w,{disabled:!0}):p==="number"?t.jsx(w,{}):t.jsx(P.TextArea,{rows:4,style:{height:"auto"}});return t.jsx("td",{...r,children:i?t.jsx(g.Item,{name:s,style:{margin:0},rules:[{required:!0,message:`Vui lÃ²ng nháº­p ${l}!`}],children:x}):d})},G=()=>{const{allSkill:i}=D(e=>e.skillReducer),s=K(),l=async()=>{const e=T();await s(e)};m.useEffect(()=>{l()},[]),m.useEffect(()=>{if(i&&i.length>0){const e=i.slice().reverse().map((n,a)=>({...n,stt:a+1}));r(e)}},[i]);const p=async e=>{await s(v(e)),await l()},f=async e=>{await s(N(e)),await l()},[o]=g.useForm(),[d,r]=m.useState([]),[x,u]=m.useState(""),j=e=>e.id===x,S=e=>{o.setFieldsValue({stt:"",skill:"",description:"",...e}),u(e.id)},k=()=>{u("")},C=async e=>{try{const n=await o.validateFields();console.log("ðŸš€ ~ file: Skill.tsx:135 ~ save ~ row:",n),f(n);const a=[...d],h=a.findIndex(y=>e===y.id);if(h>-1){const y=a[h];a.splice(h,1,{...y,...n}),r(a),u("")}else a.push(n),r(a),u("")}catch(n){console.log("Validate Failed:",n)}},b=[{title:"Stt",dataIndex:"stt",key:"stt",width:40,editable:!0},{title:"Id",dataIndex:"id",key:"id",width:40,editable:!0},{title:"Ká»¹ nÄƒng",dataIndex:"skill",key:"skill",width:250,editable:!0},{title:"MÃ´ táº£",dataIndex:"description",key:"description",width:500,editable:!0},{title:"Chá»‰nh sá»­a",width:130,dataIndex:"operation",render:(e,n)=>j(n)?t.jsxs("span",{children:[t.jsx(I.Link,{onClick:()=>C(n.id),style:{marginInlineEnd:8},children:t.jsx(c,{className:"bg-[#57c81f] text-white custom-button",children:"LÆ°u"})}),t.jsx(R,{title:"Báº¡n cÃ³ muá»‘n há»§y?",onConfirm:k,children:t.jsx(c,{type:"primary",danger:!0,children:"Há»§y"})})]}):t.jsx(I.Link,{className:"flex justify-center",disabled:x!=="",onClick:()=>S(n),children:t.jsxs(c,{type:"primary",children:[t.jsx(L,{className:"inline-block me-[6px] text-xl"})," Sá»­a"]})})},{title:"XÃ³a Ká»¹ nÄƒng",dataIndex:"delete",key:"delete",width:100,render:(e,n)=>t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx(c,{type:"primary",danger:!0,onClick:()=>p(n.id),children:"X"})})}],E=b.map(e=>e.editable?{...e,onCell:n=>({record:n,inputType:e.dataIndex==="stt"||e.dataIndex==="id"?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:j(n)})}:e),A=e=>!!e.dataIndex,F=b.filter(A).map(e=>({title:e.title,dataIndex:e.dataIndex}));return t.jsxs(t.Fragment,{children:[t.jsx(V,{className:"pb-4",children:t.jsx(c,{size:"large",onClick:()=>{new B().addSheet("DanhSachKynang").addColumns(F).addDataSource(d||[]).saveAs("DanhSachKynang.xlsx")},children:"Export File Excel"})}),t.jsx(g,{form:o,component:!1,children:t.jsx(z,{components:{body:{cell:X}},bordered:!0,size:"small",dataSource:d,columns:E,rowKey:"id",scroll:{x:"max-content",y:370},pagination:{onChange:k}})})]})};export{G as default};
