import{u as B,d as G,r as c,j as e,ae as K,af as O,ag as z,ah as R}from"./index-D2hhzr5l.js";import{b as X}from"./index-D1L9iMuN.js";import{E as _,F as H}from"./index.esm-CuFWCpE2.js";import{F as s}from"./index-C2B-K0dK.js";import{S as A}from"./index-BmBi8d9y.js";import{B as r,I as m}from"./gapSize-3_nZGXRD.js";import{M as U}from"./index-Dz6noH0c.js";import{F as $}from"./index-CAJD8cr9.js";import{T as S,P as Q}from"./index-DGc-Q0ZN.js";import{T as v}from"./index-DnspLIn9.js";import"./iconBase-XyVICzTv.js";import"./ExclamationCircleFilled-CiDS7V_3.js";import"./context-DvG_oAKE.js";const W=({editing:l,dataIndex:i,title:o,inputType:x,record:I,index:k,children:d,...h})=>{const u=i==="stt"||i==="id"?e.jsx(S,{disabled:!0}):x==="number"?e.jsx(S,{}):e.jsx(m.TextArea,{rows:4,style:{height:"auto"}});return e.jsx("td",{...h,children:l?e.jsx(s.Item,{name:i,style:{margin:0},rules:[{required:!0,message:`Vui lòng nhập ${o}!`}],children:u}):d})},me=()=>{const{allJobType:l}=B(t=>t.jobTypeReducer),i=G(),o=async()=>{const t=K();await i(t)};c.useEffect(()=>{o()},[]),c.useEffect(()=>{if(l&&l.length>0){const t=l.slice().reverse().map((n,a)=>({...n,stt:a+1}));b(t)}},[l]);const x=async t=>{await i(z(t)),await o()},I=async t=>{await i(R(t)),await o()},[k,d]=c.useState(!1),h=()=>{d(!0)},u=()=>{d(!1)},D=()=>{d(!1)},[y]=s.useForm(),V=async t=>{await i(O(t)),d(!1),y.resetFields()},J=t=>{console.log("Failed:",t)},[g]=s.useForm(),[j,b]=c.useState([]),[C,p]=c.useState(""),T=t=>t.id===C,P=t=>{g.setFieldsValue({stt:"",name:"",description:"",...t}),p(t.id)},F=()=>{p("")},M=async t=>{try{const n=await g.validateFields();console.log("🚀 ~ file: TypeJob.tsx:144 ~ save ~ row:",n),I(n);const a=[...j],f=a.findIndex(w=>t===w.id);if(f>-1){const w=a[f];a.splice(f,1,{...w,...n}),b(a),p("")}else a.push(n),b(a),p("")}catch(n){console.log("Validate Failed:",n)}},E=[{title:"Stt",dataIndex:"stt",key:"stt",width:40,editable:!0},{title:"Id",dataIndex:"id",key:"id",width:40,editable:!0},{title:"Tên loại công việc",dataIndex:"name",key:"name",width:250,editable:!0},{title:"Mô tả",dataIndex:"description",key:"description",width:500,editable:!0},{title:"Giá thấp nhất",dataIndex:"minPrice",key:"minPrice",width:110,editable:!0,render:t=>e.jsxs("div",{children:[t," ",e.jsx("span",{children:".000đ"})]})},{title:"Giá cao nhất",dataIndex:"maxPrice",key:"maxPrice",width:100,editable:!0,render:t=>e.jsxs("div",{children:[t," ",e.jsx("span",{children:".000đ"})]})},{title:"Chỉnh sửa",width:140,dataIndex:"operation",render:(t,n)=>T(n)?e.jsxs("span",{children:[e.jsx(v.Link,{onClick:()=>M(n.id),style:{marginInlineEnd:8},children:e.jsx(r,{className:"bg-[#57c81f] text-white custom-button",children:"Lưu"})}),e.jsx(Q,{title:"Bạn có muốn hủy?",onConfirm:F,children:e.jsx(r,{type:"primary",danger:!0,children:"Hủy"})})]}):e.jsx(v.Link,{className:"flex justify-center",disabled:C!=="",onClick:()=>P(n),children:e.jsxs(r,{type:"primary",children:[e.jsx(X,{className:"inline-block me-[6px] text-xl"})," Sửa"]})})},{title:"Xóa Kỹ năng",dataIndex:"delete",key:"delete",width:100,render:(t,n)=>e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(r,{type:"primary",danger:!0,onClick:()=>x(n.id),children:"X"})})}],L=E.map(t=>t.editable?{...t,onCell:n=>({record:n,inputType:t.dataIndex==="stt"||t.dataIndex==="id"?"number":"text",dataIndex:t.dataIndex,title:t.title,editing:T(n)})}:t),N=t=>!!t.dataIndex,q=E.filter(N).map(t=>({title:t.title,dataIndex:t.dataIndex}));return e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"pb-4",children:[e.jsxs(A,{children:[e.jsx(r,{size:"large",type:"primary",onClick:h,children:"Thêm kỹ năng"}),e.jsx(U,{title:"Thêm kỹ năng",open:k,onOk:u,onCancel:D,width:800,children:e.jsxs(s,{form:y,name:"basic",scrollToFirstError:!0,style:{paddingBlock:32},labelCol:{span:5},wrapperCol:{span:18},onFinish:V,onFinishFailed:J,autoComplete:"off",children:[e.jsx(s.Item,{label:"Tên loại công việc ",name:"name",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{label:"Mô tả kỹ năng",name:"description",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m.TextArea,{rows:6})}),e.jsx(s.Item,{label:"Giá thấp nhất",name:"minPrice",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{label:"Giá cao nhất",name:"maxPrice",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{wrapperCol:{offset:5},children:e.jsxs($,{gap:"small",children:[e.jsx(r,{type:"primary",htmlType:"submit",children:"Thêm"}),e.jsx(r,{danger:!0,onClick:()=>y.resetFields(),children:"Reset"})]})})]})})]}),e.jsx(r,{size:"large",onClick:()=>{new _().addSheet("DanhSachLoaiCongViec").addColumns(q).addDataSource(j||[]).saveAs("DanhSachLoaiCongViec.xlsx")},children:"Export File Excel"})]}),e.jsx(s,{form:g,component:!1,children:e.jsx(H,{components:{body:{cell:W}},bordered:!0,size:"small",dataSource:j,columns:L,rowKey:"id",scroll:{x:"max-content",y:370},pagination:{onChange:F}})})]})};export{me as default};
