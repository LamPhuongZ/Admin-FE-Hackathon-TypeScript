import{u as B,d as G,r as c,j as e,ag as K,ah as O,ai as z,aj as R}from"./index-BgLP3pyJ.js";import{b as X}from"./index-BTA8yB5f.js";import{E as _,F as H}from"./index.esm-D4nnpEKp.js";import{F as s}from"./index-bKdup2Mn.js";import{S as E}from"./index-BTprGGqH.js";import{B as r,I as m}from"./gapSize-84esfVpV.js";import{M as U}from"./index-09sV6k0O.js";import{F as $}from"./index-wTG0J7tL.js";import{T as A,P as Q}from"./index-DbQxvafs.js";import{T as v}from"./index-BdFy_eBS.js";import"./iconBase-NBx636WH.js";import"./ExclamationCircleFilled-CLfVpoM2.js";import"./context-BeSh3nfh.js";const W=({editing:l,dataIndex:a,title:d,inputType:x,record:I,index:k,children:o,...h})=>{const u=a==="stt"||a==="id"?e.jsx(A,{disabled:!0}):x==="number"?e.jsx(A,{}):e.jsx(m.TextArea,{rows:4,style:{height:"auto"}});return e.jsx("td",{...h,children:l?e.jsx(s.Item,{name:a,style:{margin:0},rules:[{required:!0,message:`Vui lòng nhập ${d}!`}],children:u}):o})},me=()=>{const{allJobType:l}=B(t=>t.jobTypeReducer),a=G(),d=async()=>{const t=K();await a(t)};c.useEffect(()=>{d()},[]),c.useEffect(()=>{if(l&&l.length>0){const t=l.slice().reverse().map((n,i)=>({...n,stt:i+1}));b(t)}},[l]);const x=async t=>{await a(z(t)),await d()},I=async t=>{await a(R(t)),await d()},[k,o]=c.useState(!1),h=()=>{o(!0)},u=()=>{o(!1)},V=()=>{o(!1)},[y]=s.useForm(),D=async t=>{await a(O(t)),o(!1),y.resetFields()},J=t=>{console.log("Failed:",t)},[g]=s.useForm(),[j,b]=c.useState([]),[C,p]=c.useState(""),T=t=>t.id===C,L=t=>{g.setFieldsValue({stt:"",name:"",description:"",...t}),p(t.id)},F=()=>{p("")},N=async t=>{try{const n=await g.validateFields();console.log("🚀 ~ file: TypeJob.tsx:144 ~ save ~ row:",n),I(n);const i=[...j],f=i.findIndex(w=>t===w.id);if(f>-1){const w=i[f];i.splice(f,1,{...w,...n}),b(i),p("")}else i.push(n),b(i),p("")}catch(n){console.log("Validate Failed:",n)}},S=[{title:"Stt",dataIndex:"stt",key:"stt",width:40,editable:!0},{title:"Id",dataIndex:"id",key:"id",width:40,editable:!0},{title:"Tên loại công việc",dataIndex:"name",key:"name",width:250,editable:!0},{title:"Mô tả",dataIndex:"description",key:"description",width:500,editable:!0},{title:"Giá thấp nhất",dataIndex:"minPrice",key:"minPrice",width:110,editable:!0,render:t=>e.jsxs("div",{children:[t.toLocaleString("vi-VN")," ",e.jsx("span",{children:"đ"})]})},{title:"Giá cao nhất",dataIndex:"maxPrice",key:"maxPrice",width:100,editable:!0,render:t=>e.jsxs("div",{children:[t.toLocaleString("vi-VN")," ",e.jsx("span",{children:"đ"})]})},{title:"Chỉnh sửa",width:140,dataIndex:"operation",render:(t,n)=>T(n)?e.jsxs("span",{children:[e.jsx(v.Link,{onClick:()=>N(n.id),style:{marginInlineEnd:8},children:e.jsx(r,{className:"bg-[#57c81f] text-white custom-button",children:"Lưu"})}),e.jsx(Q,{title:"Bạn có muốn hủy?",onConfirm:F,children:e.jsx(r,{type:"primary",danger:!0,children:"Hủy"})})]}):e.jsx(v.Link,{className:"flex justify-center",disabled:C!=="",onClick:()=>L(n),children:e.jsxs(r,{type:"primary",children:[e.jsx(X,{className:"inline-block me-[6px] text-xl"})," Sửa"]})})},{title:"Xóa Kỹ năng",dataIndex:"delete",key:"delete",width:100,render:(t,n)=>e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx(r,{type:"primary",danger:!0,onClick:()=>x(n.id),children:"X"})})}],P=S.map(t=>t.editable?{...t,onCell:n=>({record:n,inputType:t.dataIndex==="stt"||t.dataIndex==="id"?"number":"text",dataIndex:t.dataIndex,title:t.title,editing:T(n)})}:t),M=t=>!!t.dataIndex,q=S.filter(M).map(t=>({title:t.title,dataIndex:t.dataIndex}));return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"pb-4",children:[e.jsxs(E,{children:[e.jsx(r,{size:"large",type:"primary",onClick:h,children:"Thêm kỹ năng"}),e.jsx(U,{title:"Thêm kỹ năng",open:k,onOk:u,onCancel:V,width:800,children:e.jsxs(s,{form:y,name:"basic",scrollToFirstError:!0,style:{paddingBlock:32},labelCol:{span:5},wrapperCol:{span:18},onFinish:D,onFinishFailed:J,autoComplete:"off",children:[e.jsx(s.Item,{label:"Tên loại công việc ",name:"name",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{label:"Mô tả kỹ năng",name:"description",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m.TextArea,{rows:6})}),e.jsx(s.Item,{label:"Giá thấp nhất",name:"minPrice",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{label:"Giá cao nhất",name:"maxPrice",rules:[{required:!0,message:"Vui lòng không bỏ trống !"}],children:e.jsx(m,{})}),e.jsx(s.Item,{wrapperCol:{offset:5},children:e.jsxs($,{gap:"small",children:[e.jsx(r,{type:"primary",htmlType:"submit",children:"Thêm"}),e.jsx(r,{danger:!0,onClick:()=>y.resetFields(),children:"Reset"})]})})]})})]}),e.jsx(r,{size:"large",onClick:()=>{new _().addSheet("DanhSachLoaiCongViec").addColumns(q).addDataSource(j||[]).saveAs("DanhSachLoaiCongViec.xlsx")},children:"Export File Excel"})]}),e.jsx(s,{form:g,component:!1,children:e.jsx(H,{components:{body:{cell:W}},bordered:!0,size:"small",dataSource:j,columns:P,rowKey:"id",scroll:{x:"max-content",y:370},pagination:{onChange:F}})})]})};export{me as default};
