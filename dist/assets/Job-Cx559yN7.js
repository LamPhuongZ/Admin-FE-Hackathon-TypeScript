import{u as B,d as J,r as i,j as t,v as F,w as G,x as O}from"./index-BgLP3pyJ.js";import{c as _,i as W,B as Z,b as $}from"./index-Ctbh6-xI.js";import{E as K,F as Q}from"./index.esm-D4nnpEKp.js";import{D as U,h as x}from"./moment-D11zqYO1.js";import{g as X,a as q}from"./useAddress-DlIQzWZI.js";import{G as j}from"./iconBase-NBx636WH.js";import{S as u,a as ee}from"./index-BTprGGqH.js";import{B as m,I as te}from"./gapSize-84esfVpV.js";function ae(s){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M14 6V4h-4v2h4zM4 8v11h16V8H4zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2h4z"},child:[]}]})(s)}function se(s){return j({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 10.5858L9.17157 7.75736L7.75736 9.17157L10.5858 12L7.75736 14.8284L9.17157 16.2426L12 13.4142L14.8284 16.2426L16.2426 14.8284L13.4142 12L16.2426 9.17157L14.8284 7.75736L12 10.5858Z"},child:[]}]})(s)}const{Search:ne}=te,{RangePicker:ie}=U,de=_(({css:s})=>({customTable:s`
    .ant-table-container {
      .ant-table-body,
      .ant-table-content {
        scrollbar-width: thin;
        scrollbar-color: #eaeaea transparent;
        scrollbar-gutter: stable;
      }
    }
  `})),le=()=>{var y;const{allListJob:s}=B(e=>e.jobRedcucer),o=J(),{styles:f}=de(),[n,v]=i.useState(""),[d,b]=i.useState(""),[l,I]=i.useState(""),[r,w]=i.useState("ALL"),D=e=>{v(e.target.value)},C=e=>{w(e)},S=(e,a)=>{b(a[0]),I(a[1]),console.log(a)},c=async(e,a,h,L,T,P,M,z,Y,H,V)=>{const R=F({page:e,size:a,sortBy:h,direction:L,title:T,districtId:P,provinceId:M,startDate:z,endDate:Y,jobTypeId:H,approval:V});await o(R)};i.useEffect(()=>{c(0,100,"id","desc",n,void 0,void 0,d,l,void 0,r)},[n]),i.useEffect(()=>{const e=setTimeout(()=>{c(0,100,"id","desc",n,void 0,void 0,d,l,void 0,r)},300);return()=>clearTimeout(e)},[n,d,l,r]);const k=async e=>{await o(G(e)),await c(0,100,"id","desc",n,void 0,void 0,d,l,void 0,r)},E=async e=>{await o(O(e)),await c(0,100,"id","desc",n,void 0,void 0,d,l,void 0,r)},p=(y=s==null?void 0:s.content)==null?void 0:y.map((e,a)=>({...e,stt:a+1})),g=[{title:"Stt",dataIndex:"stt",key:"stt",width:40,fixed:"left"},{title:"JobId",dataIndex:"jobId",key:"jobId",width:60,fixed:"left"},{title:"Tiêu đề",dataIndex:"title",key:"title",width:200},{title:"Mô tả",dataIndex:"description",key:"description",width:250},{title:t.jsx("div",{style:{textAlign:"center"},children:"Hình ảnh"}),dataIndex:"images",key:"images",width:300,render:e=>t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:e&&e.length>0?e.slice(0,4).map((a,h)=>t.jsx("img",{src:a.url,width:50,alt:"Job Image"},h)):t.jsx("img",{src:W,width:50,alt:"Default Image"})})},{title:"Thời gian",dataIndex:"duration",key:"duration",width:100,render:e=>t.jsxs("div",{children:[e," ",t.jsx("span",{children:" - tiếng"})]})},{title:"Số điện thoại",dataIndex:"phone",key:"phone",width:120},{title:"Địa chỉ",dataIndex:"address",key:"address",width:250},{title:"Quận huyện",dataIndex:"districtId",key:"districtId",width:140,render:e=>{const a=X(e);return(a==null?void 0:a.name)||"chưa xác định"}},{title:"Tỉnh thành",dataIndex:"provinceId",key:"provinceId",width:180,render:e=>{const a=q(e);return(a==null?void 0:a.name)||"chưa xác định"}},{title:"Người liên hệ",dataIndex:"contactPerson",key:"contactPerson",width:150},{title:"Ngày bắt đầu",dataIndex:"startDate",key:"startDate",width:120,render:e=>x(e).format("DD-MM-YYYY HH:mm:ss")},{title:"Ngày kết thúc",dataIndex:"endDate",key:"endDate",width:120,render:e=>x(e).format("DD-MM-YYYY HH:mm:ss")},{title:"Ngày đăng",dataIndex:"postedDate",key:"postedDate",width:120,render:e=>x(e).format("DD-MM-YYYY HH:mm:ss")},{title:"Trạng thái xác thực",dataIndex:"jobApprovalStatus",key:"jobApprovalStatus",width:100,fixed:"right",render:e=>t.jsx("div",{className:"flex justify-center",children:(()=>{switch(e){case"PENDING":return t.jsx($,{className:"text-[#faad15] text-[24px]"});case"APPROVED":return t.jsx(Z,{className:"text-[#57c81f] text-[24px]"});case"REJECTED":return t.jsx(se,{className:"text-red-500 text-[24px]"});default:return null}})()})},{title:"Hành động",dataIndex:"delete",key:"delete",width:110,fixed:"right",render:(e,a)=>t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:4},children:[t.jsx(m,{type:"primary",onClick:()=>k(a.jobId),disabled:a.jobApprovalStatus!=="PENDING",children:"✓"}),t.jsx(m,{type:"primary",danger:!0,onClick:()=>E(a.jobId),disabled:a.jobApprovalStatus!=="PENDING",children:"X"})]})}],N=e=>!!e.dataIndex,A=g.filter(N).map(e=>({title:e.title,dataIndex:e.dataIndex}));return t.jsxs(t.Fragment,{children:[t.jsxs(u,{className:"flex justify-between items-center mx-2 p-2",children:[t.jsxs(u,{children:[t.jsx(ne,{placeholder:"Tìm theo tiêu đề",allowClear:!0,enterButton:!0,size:"large",value:n,onChange:D}),t.jsx(u,{direction:"vertical",size:12,children:t.jsx(ie,{size:"large",onChange:S})}),t.jsx(ee,{defaultValue:"ALL",style:{width:120},size:"large",onChange:C,options:[{value:"ALL",label:"Tất cả"},{value:"PENDING",label:"Đang chờ"},{value:"APPROVED",label:"Chấp nhận"},{value:"REJECTED",label:"Từ chối"}]}),t.jsx(m,{size:"large",onClick:()=>{new K().addSheet("DanhSachCongViec").addColumns(A).addDataSource(p||[]).saveAs("DanhSachCongViec.xlsx")},children:"Export File Excel"})]}),t.jsxs("div",{className:"flex items-center text-2xl font-medium",children:[t.jsx("img",{className:"me-2",src:"https://emoji.slack-edge.com/T0172CCPGUW/party-blob/d7253707fa13e9ee.gif",width:"30"}),t.jsx("h1",{className:"text-2xl me-1",children:s==null?void 0:s.totalElements}),t.jsx(ae,{})]})]}),t.jsx(Q,{size:"small",className:`${f.customTable} p-2`,columns:g,dataSource:p,rowKey:"jobId",bordered:!0,scroll:{x:"max-content",y:370},pagination:{pageSize:10}})]})},ge=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{le as J,ae as M,ge as a};
